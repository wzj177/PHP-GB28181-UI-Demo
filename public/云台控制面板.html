<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>云台控制 | PTZ Control</title>
  <style>
    :root {
      --bg: #0b1220;
      --panel: #0f172a;
      --border: #1e293b;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --primary: #3b82f6;
      --primary-hover: #2563eb;
      --danger: #ef4444;
      --success: #22c55e;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: linear-gradient(180deg, #020617, #0b1220);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                   "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      color: var(--text);
    }

    .page {
      max-width: 1100px;
      margin: 24px auto;
      padding: 20px;
    }

    .title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .grid {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 16px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
    }

    .panel h3 {
      margin: 0 0 12px;
      font-size: 14px;
      font-weight: 600;
      color: #c7d2fe;
    }

    /* ================= PTZ 主控 ================= */
    .ptz-main {
      display: grid;
      grid-template-columns: 200px 1fr;
      gap: 20px;
      align-items: center;
    }

    .pad {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle at center, #0b1220, #020617);
      border: 1px solid var(--border);
      position: relative;
    }

    .dir {
      position: absolute;
      width: 44px;
      height: 44px;
      border-radius: 10px;
      background: #020617;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--muted);
      cursor: pointer;
      transition: .15s;
    }

    .dir:hover { color: var(--primary); border-color: var(--primary); }

    .up { top: 12px; left: 50%; transform: translateX(-50%); }
    .down { bottom: 12px; left: 50%; transform: translateX(-50%); }
    .left { left: 12px; top: 50%; transform: translateY(-50%); }
    .right { right: 12px; top: 50%; transform: translateY(-50%); }

    .upleft { top: 40px; left: 40px; }
    .upright { top: 40px; right: 40px; }
    .downleft { bottom: 40px; left: 40px; }
    .downright { bottom: 40px; right: 40px; }

    .center {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 52px; height: 52px;
      border-radius: 50%;
      background: #020617;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: var(--muted);
    }

    /* ================= 参数区 ================= */
    .controls {
      display: grid;
      gap: 14px;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .row label {
      width: 72px;
      font-size: 13px;
      color: var(--muted);
    }

    input[type=range] {
      flex: 1;
    }

    .btn-group {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    button {
      height: 36px;
      background: #020617;
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      cursor: pointer;
      transition: .15s;
    }

    button:hover { border-color: var(--primary); color: var(--primary); }

    button.primary {
      background: var(--primary);
      border-color: var(--primary);
      color: #fff;
    }

    button.primary:hover { background: var(--primary-hover); }

    /* ================= 预置位 ================= */
    .preset-list {
      display: grid;
      gap: 8px;
      max-height: 220px;
      overflow: auto;
    }

    .preset {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 10px;
      background: #020617;
      border: 1px solid var(--border);
      border-radius: 10px;
      font-size: 13px;
    }

    .preset span { color: var(--text); }

    .preset button {
      height: 28px;
      padding: 0 10px;
      font-size: 12px;
    }

    /* ================= 语音 ================= */
    .talk {
      display: flex;
      gap: 12px;
    }

    .talk button { flex: 1; }
  </style>
</head>
<body>
  <div class="page">
    <div class="title">云台控制（PTZ）</div>

    <div class="grid">
      <!-- 主控制 -->
      <div class="panel">
        <h3>方向控制</h3>
        <div class="ptz-main">
          <div class="pad">
            <div class="dir up">▲</div>
            <div class="dir down">▼</div>
            <div class="dir left">◀</div>
            <div class="dir right">▶</div>
            <div class="dir upleft">↖</div>
            <div class="dir upright">↗</div>
            <div class="dir downleft">↙</div>
            <div class="dir downright">↘</div>
            <div class="center">PTZ</div>
          </div>

          <div class="controls">
            <div class="row">
              <label>速度</label>
              <input type="range" min="1" max="10" value="5" />
            </div>

            <div class="btn-group">
              <button>变倍 +</button>
              <button>变倍 −</button>
              <button>自动对焦</button>
              <button>远焦</button>
              <button>近焦</button>
              <button>光圈</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 预置位 + 巡航 + 对讲 -->
      <div class="panel">
        <h3>预置位（1–255）</h3>
        <div class="preset-list" id="presetList"></div>

        <h3 style="margin-top:16px">巡航（Cruise）</h3>
        <div class="controls">
          <div class="row">
            <label>巡航号</label>
            <select id="cruiseId" onchange="loadCruisePoints()">
              <option value="1">巡航 1</option>
              <option value="2">巡航 2</option>
              <option value="3">巡航 3</option>
            </select>
          </div>

          <div class="row">
            <label>停留(s)</label>
            <input id="cruiseStay" type="number" value="5" min="1" max="60" />
          </div>

          <div class="row">
            <label>速度</label>
            <input id="cruiseSpeed" type="number" value="4" min="1" max="8" />
          </div>

          <div class="btn-group">
            <button onclick="addToCruise()">加入巡航</button>
            <button onclick="startCruise()">开始巡航</button>
            <button onclick="stopCruise()">停止巡航</button>
          </div>
        </div>

        <div style="margin-top:12px">
          <h3>巡航点列表</h3>
          <div class="preset-list" id="cruisePointList"></div>
        </div>

        <h3 style="margin-top:16px">语音对讲</h3>
        <div class="talk">
          <button class="primary">开始对讲</button>
          <button>停止</button>
        </div>
      </div>
  </div>

<script>
  // ================= 预置位 1~255（GB28181 标准） =================
  const presetList = document.getElementById('presetList');

  // 示例：平台已保存的预置位名称
  const presetNames = {
    1: '大门入口',
    2: '停车场',
    5: '走廊'
  };

  for (let i = 1; i <= 255; i++) {
    const item = document.createElement('div');
    item.className = 'preset';

    const name = presetNames[i] ? `${i} · ${presetNames[i]}` : `${i} · 未设置`;

    item.innerHTML = `
      <span>${name}</span>
      <div>
        <button onclick="gotoPreset(${i})">调用</button>
        <button onclick="setPreset(${i})">设置</button>
      </div>
    `;

    presetList.appendChild(item);
  }

  function gotoPreset(id) {
    console.log('GOTO_PRESET', id);
    // 发送 GB28181 调用预置位指令
  }

  function setPreset(id) {
    console.log('SET_PRESET', id);
    // 发送 GB28181 设置预置位指令（保存当前 PTZ 状态）
  }
</script>
</body>
</html>
</html>

