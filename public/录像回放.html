<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>安防录像回放时间轴</title>
  <style>
    :root {
      --bg: #0f172a;            /* slate-900 */
      --panel: #020617;         /* slate-950 */
      --line: #334155;          /* slate-700 */
      --text: #e5e7eb;          /* gray-200 */
      --muted: #94a3b8;         /* slate-400 */
      --accent: #22c55e;        /* green-500 */
      --danger: #ef4444;        /* red-500 */
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: linear-gradient(180deg, #020617, #020617 60%, #020617);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                   "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
    }

    .container {
      max-width: 1200px;
      margin: 24px auto;
      padding: 16px;
      background: var(--panel);
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,.4);
    }

    .player {
      width: 100%;
      height: 420px;
      background: #000;
      border-radius: 12px;
      overflow: hidden;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: #000;
    }

    .timeline-wrapper {
      margin-top: 20px;
      padding: 16px 12px 12px;
      background: var(--bg);
      border-radius: 12px;
    }

    .timeline-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-size: 13px;
      color: var(--muted);
    }

    .timeline-canvas {
      width: 100%;
      height: 72px;
      display: block;
      cursor: pointer;
    }

    .legend {
      display: flex;
      gap: 16px;
      margin-top: 8px;
      font-size: 12px;
      color: var(--muted);
    }

    .legend span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 2px;
      background: var(--accent);
    }

    .dot.red { background: var(--danger); }
  </style>
</head>
<body>
  <div class="container">
    <!-- 播放器占位 -->
    <div class="player">
      <video controls muted></video>
    </div>

    <!-- 时间轴 -->
    <div class="timeline-wrapper">
      <div class="timeline-header">
        <div>录像时间轴（24 小时）</div>
        <div id="currentTimeLabel">--:--:--</div>
      </div>

      <canvas id="timeline" class="timeline-canvas"></canvas>

      <div class="legend">
        <span><i class="dot"></i> 正常录像</span>
        <span><i class="dot red"></i> 报警录像</span>
      </div>
    </div>
  </div>

<script>
  const canvas = document.getElementById('timeline');
  const ctx = canvas.getContext('2d');
  const label = document.getElementById('currentTimeLabel');

  function resize() {
    const dpr = window.devicePixelRatio || 1;
    canvas.width = canvas.clientWidth * dpr;
    canvas.height = canvas.clientHeight * dpr;
    ctx.scale(dpr, dpr);
    draw();
  }

  window.addEventListener('resize', resize);

  // 示例录像片段（安防常见：多段）
  // start / end 单位：秒（0 ~ 86400）
  const records = [
    { start: 2 * 3600, end: 5 * 3600 + 1800, type: 'normal' },
    { start: 7 * 3600, end: 9 * 3600, type: 'normal' },
    { start: 16 * 3600 + 30, end: 17 * 3600 + 120, type: 'alarm' },
    { start: 19 * 3600, end: 21 * 3600 + 600, type: 'normal' }
  ];

  let currentSecond = 17 * 3600; // 当前指针时间

  function format(sec) {
    const h = String(Math.floor(sec / 3600)).padStart(2, '0');
    const m = String(Math.floor((sec % 3600) / 60)).padStart(2, '0');
    const s = String(sec % 60).padStart(2, '0');
    return `${h}:${m}:${s}`;
  }

  function draw() {
    const w = canvas.clientWidth;
    const h = canvas.clientHeight;

    ctx.clearRect(0, 0, w, h);

    // 背景
    ctx.fillStyle = '#020617';
    ctx.fillRect(0, 0, w, h);

    const axisY = h / 2;

    // 主轴
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(0, axisY);
    ctx.lineTo(w, axisY);
    ctx.stroke();

    // 小时刻度
    for (let i = 0; i <= 24; i++) {
      const x = (i / 24) * w;
      ctx.strokeStyle = '#475569';
      ctx.beginPath();
      ctx.moveTo(x, axisY - 12);
      ctx.lineTo(x, axisY + 12);
      ctx.stroke();

      if (i < 24) {
        ctx.fillStyle = '#94a3b8';
        ctx.font = '11px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(`${String(i).padStart(2, '0')}:00`, x, axisY + 28);
      }
    }

    // 录像段
    records.forEach(r => {
      const x1 = (r.start / 86400) * w;
      const x2 = (r.end / 86400) * w;
      ctx.fillStyle = r.type === 'alarm' ? '#ef4444' : '#22c55e';
      ctx.fillRect(x1, axisY - 6, x2 - x1, 12);
    });

    // 当前时间指针
    const px = (currentSecond / 86400) * w;
    ctx.strokeStyle = '#ef4444';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(px, 0);
    ctx.lineTo(px, h);
    ctx.stroke();

    // 时间标签
    ctx.fillStyle = '#ef4444';
    ctx.font = '12px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(format(currentSecond), px, 14);

    label.textContent = format(currentSecond);
  }

  canvas.addEventListener('click', e => {
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    currentSecond = Math.floor((x / rect.width) * 86400);
    draw();
  });

  resize();
</script>
</body>
</html>
